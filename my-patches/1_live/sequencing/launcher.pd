#N canvas 66 32 1854 977 12;
#X obj 98 288 inlet;
#X obj 232 290 inlet;
#X obj 403 290 inlet;
#X obj 109 149 tgl 20 0 \$0-UI-launch-queue \$0-i-UI-launch-queue Launch 23 10 0 12 #e0e1e1 #000000 #000000 0 1;
#X obj 194 149 tgl 20 0 \$0-UI-loop \$0-i-UI-loop Loop 23 10 0 12 #e0e1e1 #000000 #000000 0 1;
#X text 214 102 LOOP;
#X obj 109 125 nbx 2 18 -1e+37 1e+37 0 0 \$0-UI-bar-count \$0-i-UI-bar-count Bar\ count 37 10 0 12 #fcfcfc #000000 #000000 0 256;
#X obj 112 176 hsl 130 20 0 1 0 0 \$0-slider-dummy \$0-i-slider empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 98 332 unpack f f, f 11;
#X text 140 102 LAUNCH-Q;
#X text 102 102 SIG;
#X text 21 16 VERSION 2 ----- (BAR) LAUNCHER/CONTROL ABSTRACTION FOR CLIP;
#X obj 279 118 loadbang;
#X obj 279 163 f \$2;
#X obj 279 186 s \$0-i-UI-bar-count;
#X text 401 270 LOOP(BANG);
#X text 230 268 LAUNCH-QUEUE(BANG);
#N canvas 1066 90 763 758 launch-engine 0;
#X obj 29 267 sel 1;
#X obj 29 292 f;
#X obj 36 315 + 1;
#X obj 29 340 + 1;
#X obj 29 363 nbx 2 18 -1e+37 1e+37 0 0 empty empty empty 39 10 0 12 #fcfcfc #000000 #000000 0 256;
#X floatatom 29 243 5 0 0 0 - - - 0;
#X msg 100 292 0;
#X obj 79 381 expr $f1 >= $f2;
#X obj 79 407 sel 1;
#X obj 29 186 spigot;
#X obj 93 166 tgl 20 0 empty empty LISTEN\ TO\ SIGNATURE 23 10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 93 189 set \$1;
#X obj 93 213 s \$0-i-UI-launch-queue;
#X obj 110 140 r \$0-UI-launch-queue;
#X floatatom 29 60 5 0 0 1 SIGNATURE\ NOTE - - 0;
#X text 256 140 LAUNCH QUEUE COMING FROM UI;
#X floatatom 29 626 5 0 0 1 BAR-X-LAUNCH - - 0;
#X obj 79 505 f;
#X obj 126 485 tgl 20 0 empty empty loop 23 10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 126 461 r \$0-UI-loop;
#X obj 79 559 expr $f1 == 1;
#X obj 79 584 s \$0-loop;
#X obj 93 116 r \$0-loop;
#X text 199 380 OUTPUTS BANG WHEN LAST BAR STARTS (OR LAUNCHED) \; NOW: 1) EITEHER WE STOP LISTENING --> NO NEXT (FIRST) BAR LAUNCH \; OR 2) CHECK IF LOOP IS ON --> CONTINUE LISTENING (NO ACTION) \;, f 67;
#X obj 181 353 r \$0-UI-bar-count;
#X obj 29 26 inlet;
#X obj 29 662 outlet;
#X text 257 214 SETTING LAUNCH QUEUE UI (WHEN TURNED OFF BY \$0-loop);
#X msg 126 509 set \$1;
#X obj 126 533 s \$0-i-UI-loop;
#X obj 100 267 r \$0-cnt-reset;
#X text 182 559 WHEN LAST BAR STARTS (OR LAUNCHED): SENDS 1 \, IF LOOP IS ON \, IF LOOP IS OFF SENDS 0 --> THIS WILL LEAD TO CONTINUE OR STOP LISTENING RESPECTIVELY.;
#X text 182 614 NOTE THAT \, ONLY AT "START" OF THE LAST BAR LOOP ON/OFF INFORMATION WILL BE SENT TO LAUNCH-QUEUE TOGGLE. SO IF LOOP TURNS OFF AFTER LAST BAR IS ALREADY STARTED \, THIS RESULT IN ONE EXTRA LOOP TO BE PLAYED. SO WHEN YOU NEED TO TURN OFF THE LOOP (SUPPOSEDLY FROM THE MAIN PATCH) \, DO IT AT THE BEGINNEING OF THE LAST LOOP (MEANING FIRST BAR OF THE LAST LOOP) \;;
#X text 162 103 IF LOOP OR NOT \, HAPPENS BY TURNING ON/OFF THE LAUNCH QUEUE AT THE START OF THE LAST BAR, f 51;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 3 0 4 0;
#X connect 4 0 7 0;
#X connect 4 0 16 0;
#X connect 5 0 0 0;
#X connect 6 0 1 1;
#X connect 7 0 8 0;
#X connect 8 0 6 0;
#X connect 8 0 17 0;
#X connect 9 0 5 0;
#X connect 10 0 11 0;
#X connect 10 0 9 1;
#X connect 11 0 12 0;
#X connect 13 0 10 0;
#X connect 14 0 9 0;
#X connect 16 0 26 0;
#X connect 17 0 20 0;
#X connect 18 0 17 1;
#X connect 18 0 28 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 22 0 10 0;
#X connect 24 0 7 1;
#X connect 25 0 14 0;
#X connect 28 0 29 0;
#X connect 30 0 6 0;
#X restore 98 356 pd launch-engine;
#X obj 98 514 outlet;
#X text 147 514 LAUNCH BAR "X";
#X text 94 237 FROM SIGNATURE \; [0]NOTE NUMBER \; [1]BAR DURATION \;;
#X obj 232 314 s \$0-i-UI-launch-queue;
#X obj 403 314 s \$0-i-UI-loop;
#X text 230 334 SENDING THE INLETS DIRECTLY TO UI (-> UI OUTPUTS TO ENGINE);
#N canvas 792 492 426 235 Slider 0;
#X obj 23 197 s \$0-i-slider;
#X obj 23 9 inlet;
#X text 65 9 BAR-X-LAUNCH (-> BANG);
#X obj 77 93 inlet;
#X text 121 92 1-BAR DURATION;
#X obj 23 170 line;
#X obj 59 117 f;
#X msg 59 142 1 \$1;
#X msg 23 35 0;
#X obj 23 61 t b f;
#X connect 1 0 8 0;
#X connect 3 0 6 1;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 6 0;
#X connect 9 1 5 0;
#X restore 112 383 pd Slider;
#X obj 441 118 r clock-on;
#X obj 441 141 sel 0;
#X text 444 96 RESET EVERYTHING WHEN CLOCK OFF;
#X obj 441 164 f \$0;
#X msg 441 187 \; \$1-i-UI-loop 0 \; \$1-i-UI-launch-queue 0 \; \$1-cnt-reset bang \;;
#X obj 300 438 f;
#X obj 330 438 + 1;
#X obj 109 418 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X floatatom 300 477 5 0 0 0 - - - 0;
#X obj 300 513 outlet;
#X text 350 514 NUMBER OF BARS SINCE LAUNCHED;
#X obj 318 389 r \$0-UI-launch-queue;
#X floatatom 98 476 5 0 0 0 - - - 0;
#X msg 318 415 1;
#X text 464 383 RESETTING TO BAR NUMBER 1 WHEN LAUNCHED/RE-LAUNCHED, f 26;
#X obj 346 476 s \$1-bar-x;
#X text 424 472 IF NEEDED \, TO USE IN MAIN SCENE FOR AUTOMATIZE SCENE CHANGE., f 34;
#N canvas 1274 73 585 675 Functional-Description 0;
#X obj 102 102 cnv 14 155 15 empty empty FUNCTIONAL-DESCRIPTION 0 8 0 12 #ff8300 #404040 0;
#X text 26 157 ARGUMENT 1: \$1 CLIP NUMEBR -> WHICH CLIP THIS LAUNCHER IS USED IN \; ARGUMENT 2: \$2 BAR-COUNT -> HOW MANY BAR IS PLAYED WHEN LAUNCHED \;, f 68;
#X text 26 203 INLET 1 : [0] NOTE-NUMBER [1] BAR DURATION \; INLET 2 : LAUNCH-QUEUE FROM MAIN PATCH \; INLET 3 : LOOP ON FROM MANI PATCH \; OUTLET 1: LAUNCH/START OF BAR X \; OUTLET 2: HOW MANY BARS PLAYED SINCE LAUNCH (COULD BE USED FOR COMPOSITION) \;, f 77;
#X text 28 342 LAUNCH-QUEUE EITHER EXTERNALLY FROM THE MAIN PATCH OR FROM GUI WILL MAKE THE LAUNCH-ENGINE TO LISTEN FOR THE FIRST NOTE OF SIGNATURE. WHEN ARRIVED \, LAUNCHER WILL START RUNNING FROM FIRST BAR UNTIL THE LAST BAR SET IN THE ARGUMENT WITH A BAR DURATION THAT IS ARRIVED FROM THE SIGNATURE AS WELL., f 72;
#X text 30 466 - IN THE CLIP (PARENT) WINDOW \, COULD USE THE BAR NUMBERS OUTPUTTED TO SELECT ANY SEQUENCE OR MODULATIONS -> MOST FLEXIBLE \; - CLIPS COULD BE LAUNCHED MANUALLY OR BY PROGRAMMATICALLY SENDING MESSAGES \, COMPOSING THE SCENE \; - BAR NUMBER STARTED COULD BE GIVEN BACK FROM CLIP TO MAIN PATCH TO HELP THE MAIN COMPOSITION KNOW WHERE THE SONG IS AND WHERE TO TRIGGER CHANGE., f 73;
#X text 32 607 TERMINOLOGY: MULTIBAR COULD BE CALLED A LOOP OR SECTION \;;
#X coords 0 -1 1 1 160 20 2 100 100;
#X restore 19 42 pd Functional-Description;
#X connect 0 0 8 0;
#X connect 1 0 21 0;
#X connect 2 0 22 0;
#X connect 8 0 17 0;
#X connect 8 1 24 1;
#X connect 12 0 13 0;
#X connect 12 0 28 0;
#X connect 13 0 14 0;
#X connect 17 0 24 0;
#X connect 17 0 32 0;
#X connect 17 0 37 0;
#X connect 25 0 26 0;
#X connect 26 0 28 0;
#X connect 28 0 29 0;
#X connect 30 0 31 0;
#X connect 30 0 33 0;
#X connect 31 0 30 1;
#X connect 32 0 30 0;
#X connect 33 0 34 0;
#X connect 33 0 40 0;
#X connect 36 0 38 0;
#X connect 37 0 18 0;
#X connect 38 0 30 1;
#X coords 0 -1 1 1 150 101 2 100 100;
