#N canvas 2238 110 695 567 12;
#X text 18 7 VERSION 0;
#N canvas 2803 86 561 575 sample-loading 0;
#X obj 15 91 openpanel;
#X obj 187 171 f \$0;
#X obj 155 33 loadbang;
#X obj 15 231 pack s f, f 25;
#X obj 187 146 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X listbox 15 257 74 0 0 0 - - - 0;
#X obj 15 339 soundfiler, f 31;
#X floatatom 15 396 8 0 0 1 number\ of\ samples - - 0;
#X listbox 229 395 20 0 0 0 - - - 0;
#X obj 229 419 unpack f;
#X msg 15 313 read -resize \$1 \$2-sample;
#X floatatom 194 196 5 0 0 0 - - - 0;
#X text 291 418 Sample Rate;
#X floatatom 113 467 9 0 0 1 durarion\ (ms) - - 0;
#X obj 113 444 expr 1000*$f1/$f2;
#X floatatom 15 495 8 0 0 0 - - - 0;
#X obj 242 444 s \$0-sample-SR;
#X obj 15 4 r \$0-load;
#X obj 25 366 bng 20 250 50 0 \$0-loaded empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 255 312 unpack s;
#X obj 155 81 t b b;
#X obj 155 58 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 113 491 s \$0-sample-dur;
#X obj 15 472 expr $f1-1;
#X obj 15 519 s \$0-last-sample;
#X obj 255 337 s \$0-loaded-sample;
#X obj 29 120 r \$0-i-loaded-sample;
#X text 390 337 send for savestate;
#X obj 29 143 select symbol;
#X msg 71 179 no sample;
#X obj 71 204 print;
#X msg 15 36 symbol /home/mobin/Documents/Sounds, f 16;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 1 0 11 0;
#X connect 2 0 21 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 5 0 10 0;
#X connect 5 0 19 0;
#X connect 6 0 7 0;
#X connect 6 0 18 0;
#X connect 6 1 8 0;
#X connect 7 0 14 0;
#X connect 7 0 23 0;
#X connect 8 0 9 0;
#X connect 9 0 14 1;
#X connect 9 0 16 0;
#X connect 10 0 6 0;
#X connect 13 0 22 0;
#X connect 14 0 13 0;
#X connect 15 0 24 0;
#X connect 17 0 31 0;
#X connect 19 0 25 0;
#X connect 20 1 4 0;
#X connect 21 0 20 0;
#X connect 23 0 15 0;
#X connect 26 0 28 0;
#X connect 28 0 29 0;
#X connect 28 1 3 0;
#X connect 29 0 30 0;
#X connect 31 0 0 0;
#X restore 46 350 pd sample-loading;
#N canvas 2950 180 475 429 sample-playing 0;
#X obj 14 9 r \$0-play;
#N canvas 552 158 856 547 Playback-Cursor-Loop 0;
#X obj 19 194 del;
#X obj 19 232 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 19 25 r \$0-play;
#X obj 19 269 s \$0-i-play;
#X obj 45 233 s \$0-fin;
#X obj 177 194 del;
#X obj 177 232 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 177 23 r \$0-play;
#X obj 177 274 s \$0-i-play;
#X obj 203 233 s \$0-fin;
#X obj 313 167 route 0 1, f 15;
#X obj 313 190 f \$0;
#X obj 364 190 f \$0;
#X msg 364 256 \; \$1-tgl-forward 0 \; \$1-tgl-reverse 1 \;;
#X msg 313 212 \; \$1-tgl-forward 1 \; \$1-tgl-reverse 0 \;;
#X obj 18 312 r \$0-loop-on;
#X obj 18 375 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 18 400 f \$0;
#X msg 18 425 \; \$1-i-pploop-on 0 \;;
#X obj 159 375 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 159 400 f \$0;
#X obj 159 312 r \$0-pploop-on;
#X msg 159 425 \; \$1-i-loop-on 0 \;;
#X obj 177 63 spigot;
#X obj 232 63 r \$0-pploop-on;
#X obj 19 64 spigot;
#X obj 74 64 r \$0-loop-on;
#X obj 197 92 del 100;
#X obj 197 117 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 159 337 route 0 1;
#X obj 18 337 route 0 1;
#X msg 123 375 0;
#X text 17 467 turning on either of simple or ping pong loop should turn the other off. but turning any of them off should not affect the other \; turning off the ping-pong loop should reset the reverse (set to 0) \;, f 69;
#X text 374 25 If simple loop on: \; - simple send \$0-i-play \; If ping-ping loop on: \; - when recieving \$0-play \, after line~ starts \, or here after 100ms \, if reverse toggle is off turn it on \, else turn it off \;, f 65;
#X obj 37 168 r \$0-sample-dur;
#X obj 195 168 r \$0-sample-dur;
#X obj 19 124 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 80 98 r \$0-stop;
#X msg 80 123 stop;
#X connect 0 0 1 0;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 2 0 25 0;
#X connect 5 0 9 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 23 0;
#X connect 10 0 11 0;
#X connect 10 1 12 0;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 15 0 30 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 19 0 20 0;
#X connect 20 0 22 0;
#X connect 21 0 29 0;
#X connect 23 0 5 0;
#X connect 23 0 27 0;
#X connect 24 0 23 1;
#X connect 25 0 36 0;
#X connect 26 0 25 1;
#X connect 27 0 28 0;
#X connect 28 0 10 0;
#X connect 29 0 31 0;
#X connect 29 1 19 0;
#X connect 30 1 16 0;
#X connect 31 0 28 0;
#X connect 34 0 0 1;
#X connect 35 0 5 1;
#X connect 36 0 0 0;
#X connect 37 0 38 0;
#X connect 38 0 0 0;
#X connect 38 0 5 0;
#X restore 173 318 pd Playback-Cursor-Loop;
#X obj 16 325 outlet~;
#X obj 16 274 *~;
#X obj 34 250 r \$0-velocity;
#X obj 312 15 loadbang;
#X obj 312 38 f \$0;
#X msg 312 62 \; \$1-tgl-forward 1 \; \$1-tgl-reverse 0 \;;
#X obj 15 224 +~;
#X obj 14 36 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 14 63 sel 0 1, f 33;
#X obj 14 86 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 128 88 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#N canvas 2763 565 492 408 reader 0;
#X obj 19 215 line~;
#X obj 19 238 tabread~ \$0-sample;
#X obj 19 263 *~;
#X obj 19 6 inlet;
#X obj 20 343 outlet~;
#X obj 19 92 pack 0 0 0;
#X msg 19 132 \$1 \, \$2 \$3;
#X text 104 91 Start index - End index - Duration (ms);
#X msg 101 132 \$2 \, \$1 \$3;
#X obj 19 157 spigot;
#X obj 69 157 tgl 20 0 empty \$0-tgl-forward empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 101 156 spigot;
#X obj 151 156 tgl 20 0 empty \$0-tgl-reverse empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 187 132 r \$0-stop;
#X obj 86 61 r \$0-sample-dur;
#X obj 52 37 r \$0-last-sample;
#X obj 179 223 inlet;
#X obj 115 320 line~;
#X obj 179 248 route 0 1;
#X msg 115 292 0 10;
#X obj 179 278 del 10;
#X msg 235 278 1;
#X msg 179 303 stop \, 0;
#X text 276 175 when message 0 is at inlet. 1) volume of the channel goes to 0 in 10 ms. 2)line~ of tabread~ is first stopped an then jump to initial (0) value., f 29;
#X msg 187 157 stop;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 8 0;
#X connect 6 0 9 0;
#X connect 8 0 11 0;
#X connect 9 0 0 0;
#X connect 10 0 9 1;
#X connect 11 0 0 0;
#X connect 12 0 11 1;
#X connect 13 0 24 0;
#X connect 14 0 5 2;
#X connect 15 0 5 1;
#X connect 16 0 18 0;
#X connect 17 0 2 1;
#X connect 18 0 19 0;
#X connect 18 0 20 0;
#X connect 18 1 21 0;
#X connect 19 0 17 0;
#X connect 20 0 22 0;
#X connect 21 0 17 0;
#X connect 22 0 0 0;
#X connect 24 0 0 0;
#X restore 128 187 pd reader;
#X msg 170 157 0, f 1;
#X msg 188 157 1, f 1;
#N canvas 2444 493 492 408 reader 0;
#X obj 19 215 line~;
#X obj 19 238 tabread~ \$0-sample;
#X obj 19 263 *~;
#X obj 19 6 inlet;
#X obj 20 343 outlet~;
#X obj 19 92 pack 0 0 0;
#X msg 19 132 \$1 \, \$2 \$3;
#X text 104 91 Start index - End index - Duration (ms);
#X msg 101 132 \$2 \, \$1 \$3;
#X obj 19 157 spigot;
#X obj 69 157 tgl 20 0 empty \$0-tgl-forward empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 101 156 spigot;
#X obj 151 156 tgl 20 0 empty \$0-tgl-reverse empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 187 132 r \$0-stop;
#X obj 86 61 r \$0-sample-dur;
#X obj 52 37 r \$0-last-sample;
#X obj 179 223 inlet;
#X obj 115 320 line~;
#X obj 179 248 route 0 1;
#X msg 115 292 0 10;
#X obj 179 278 del 10;
#X msg 235 278 1;
#X msg 179 303 stop \, 0;
#X text 276 175 when message 0 is at inlet. 1) volume of the channel goes to 0 in 10 ms. 2)line~ of tabread~ is first stopped an then jump to initial (0) value., f 29;
#X msg 187 157 stop;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 8 0;
#X connect 6 0 9 0;
#X connect 8 0 11 0;
#X connect 9 0 0 0;
#X connect 10 0 9 1;
#X connect 11 0 0 0;
#X connect 12 0 11 1;
#X connect 13 0 24 0;
#X connect 14 0 5 2;
#X connect 15 0 5 1;
#X connect 16 0 18 0;
#X connect 17 0 2 1;
#X connect 18 0 19 0;
#X connect 18 0 20 0;
#X connect 18 1 21 0;
#X connect 19 0 17 0;
#X connect 20 0 22 0;
#X connect 21 0 17 0;
#X connect 22 0 0 0;
#X connect 24 0 0 0;
#X restore 14 187 pd reader;
#X msg 57 157 0, f 1;
#X msg 75 157 1, f 1;
#X text 242 139 Basically there is a design choice here to decide if we should allow old playback to finish when new one is triggered. Since this will become a sort of manual delay I would not do this and will set the other bank to 0, f 29;
#X obj 242 88 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X connect 0 0 9 0;
#X connect 3 0 2 0;
#X connect 4 0 3 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 3 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 10 1 12 0;
#X connect 10 2 20 0;
#X connect 11 0 16 0;
#X connect 11 0 14 0;
#X connect 11 0 18 0;
#X connect 12 0 13 0;
#X connect 12 0 17 0;
#X connect 12 0 15 0;
#X connect 13 0 8 1;
#X connect 14 0 13 1;
#X connect 15 0 13 1;
#X connect 16 0 8 0;
#X connect 17 0 16 1;
#X connect 18 0 16 1;
#X restore 46 375 pd sample-playing;
#N canvas 521 304 461 158 initializations 0;
#X msg 16 80 \; \$1-sample edit 0 \;;
#X obj 16 57 f \$0;
#X obj 16 34 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 16 11 loadbang;
#X obj 165 59 samplerate~;
#X floatatom 165 84 6 0 0 0 - - - 0;
#X obj 165 36 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 165 11 loadbang;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 6 0 4 0;
#X connect 7 0 6 0;
#X restore 46 304 pd initializations;
#N canvas 52 20 1854 977 (subpatch) 0;
#X array \$0-sample 18432 float 2;
#X coords 0 1 18432 -1 88 88 1 0 0;
#X restore 106 119 graph;
#X obj 197 119 bng 16 250 50 0 \$0-load \$0-i-load empty 23 10 0 10 #faff00 #000000 #000000;
#X obj 197 137 bng 16 250 50 0 \$0-play \$0-i-play empty 25 10 0 12 #00ff04 #000000 #000000;
#X obj 197 173 tgl 16 0 \$0-loop-on \$0-i-loop-on empty 25 10 0 12 #bbbbbb #000000 #000000 0 1;
#X obj 197 191 tgl 16 0 \$0-pploop-on \$0-i-pploop-on empty 25 10 0 12 #7c7c7c #000000 #000000 0 1;
#X obj 197 155 bng 16 250 50 0 \$0-stop \$0-i-stop empty 25 10 0 12 #ff0400 #000000 #000000;
#X obj 46 241 inlet;
#X obj 126 241 inlet;
#X obj 46 266 s \$0-play;
#X obj 126 266 s \$0-velocity;
#X obj 45 501 outlet~;
#X obj 106 501 outlet~;
#X obj 46 69 text define -k \$0-requirenment;
#A set *- Polyphonic for sure. at least two channgels \, so in case of replay of the sample \, the current one go to zero with a sharp slope and the second channel plays the next trigger \; *- manual mouse input capability \, step sequencer capability and room for improvement when later added midi controller \; *- Send an output bang when line~ ramp is finished: this could be useful in case \, end of this sample is the trigger for another sample \; *- use line~ with tabread~ for the sample player. No need for phasor \; *- Loop and ping pong loop could be useful. this is in case it is not played through a sequencer and just triggered once \; *- Pure reverse NOT needed (at least for now I dont see a use-case since if reverse is good. could be done properly in sample-lab and exported \; *- Should have an input for velocity from sequencer as well. envelope of this could be defined when prepairing the sample in sample-lab. velocity only defines a maximum (normalizing) \; *- No need for playback speed. this should be done in preparation workflow of sample lab. if a sample is playable as midi note \, it is to be done with time-stretching and pitch-shifting functions and to be played with a midi sequencer \; *- Small GUI \, showing the recorded sample and load sample functionality \; *- save state routine to keep the previous sample loaded and loop on/off values. the waveform itself is saved with another method \; *- In general \, what is being commanded from outside this abstraction does not need save-state. So far here I see only wavetable array and Loop/Pingpong loop \, requiring save-state \; *- Edit of array set to 0 \; \; \; \; \; \; ----------------LATER---------------- \; - two outlets for L and R for manipulations. use-case coming to mind is moveing sound from ear to ear when ping pong but this needs implementations inside the sample playing subpatch. also could be used for further manipulations outside of this abstraction \; - this could later be explanded as a grid on 16 pads \, each holding a sample \, with triggering capability through both manual (real-time) and step-sequencer input \;;
#N canvas 2968 196 533 569 parameter-handling 0;
#X obj 44 95 t b f, f 2;
#X obj 73 95 t b f, f 2;
#X obj 244 18 text define -k \$0-parameters;
#A set 0 0 symbol \;;
#X obj 44 210 text set \$0-parameters 0 0;
#X obj 73 254 savestate;
#X obj 133 307 text sequence \$0-parameters;
#X msg 133 282 line 0 \, step;
#X text 259 64 Reading parametes into text \$0-parameters \, use savestate to save abstraction parameters together with saving parent patch and loading thenm next time parent path is open, f 28;
#X obj 73 350 text set \$0-parameters 0 0;
#X msg 32 414 0;
#X obj 44 21 r \$0-loop-on;
#X obj 73 45 r \$0-pploop-on;
#X obj 32 540 s \$0-i-loop-on;
#X obj 72 518 s \$0-i-pploop-on;
#X obj 114 69 r \$0-loaded-sample;
#X obj 114 95 t b s, f 2;
#X obj 44 182 pack f f s, f 12;
#X obj 32 390 del 200;
#X obj 32 464 unpack f f s;
#X obj 113 495 s \$0-i-loaded-sample;
#X obj 32 439 text get \$0-parameters 0 3;
#X connect 0 0 16 0;
#X connect 0 1 16 0;
#X connect 1 0 16 0;
#X connect 1 1 16 1;
#X connect 4 0 8 0;
#X connect 4 0 17 0;
#X connect 4 1 6 0;
#X connect 5 0 4 0;
#X connect 6 0 5 0;
#X connect 9 0 20 0;
#X connect 10 0 0 0;
#X connect 11 0 1 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 16 2;
#X connect 16 0 3 0;
#X connect 17 0 9 0;
#X connect 18 0 12 0;
#X connect 18 1 13 0;
#X connect 18 2 19 0;
#X connect 20 0 18 0;
#X restore 46 326 pd parameter-handling;
#X text 272 14 Note: 1) Loop should be ON before the first play for the loop to start working. 2) when loop is turned on \, one last play will take place. If needed change the implementation.;
#X connect 2 0 14 0;
#X connect 2 0 15 0;
#X connect 10 0 12 0;
#X connect 11 0 13 0;
#X coords 0 -1 1 1 120 115 2 100 100;
