#N canvas 52 20 1854 977 12;
#X text 326 20 VERSION 0;
#X obj 1022 489 unpack f f;
#X obj 818 13 text define -k notes;
#A set ** timer/realtime do not work here since there is no toggle to stop them. Easy to do this with a counter with desired precision (10ms) with metro 10 \; \; \; ** in general since I am not good at finger drumming \, velocity should be considered constant or discarded and hard-coded with possibility of modification using a CC \; \; \; For oneshot sequencer \; - duration of holding the note does not matter \; - velocity should be constant with a CC \; For note sequencer \; - duration is important for ADSR \; - aftertouch could be useful \; \; \; Need to keep textfile closed \, otherwise might experience lag/buginess \;;
#X text 454 15 Realtime sequencer: for One-shot input;
#X obj 673 215 inlet;
#X obj 1022 109 inlet;
#X obj 732 262 inlet, f 7;
#X obj 587 247 inlet;
#X text 669 193 Record;
#X text 1016 85 Launch;
#X text 730 242 End/Loop;
#X text 586 227 Midi;
#X obj 1141 422 text define -k \$0-sequence;
#A set 1530 \; 2470 \; 2770 \; 3620 \; 4300 \; 4520 \; 5100 \; 5660 \; 6350 \; 6570 \; 7120 \; 7610 \;;
#X obj 626 442 tgl 20 0 empty empty GO 23 10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 587 472 spigot;
#X listbox 587 576 20 0 0 0 - - - 0;
#X msg 1206 221 -1;
#X obj 47 83 bng 20 250 50 0 \$0-clear-seq \$0-i-clear-seq-dummy Clear-Sequence 23 10 0 12 #fcfcfc #000000 #000000;
#X obj 587 622 text insert \$0-sequence 1e+09;
#X obj 587 278 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 732 297 sel 0 1, f 9;
#N canvas 778 252 848 411 seq-timer 0;
#X msg 343 148 1;
#X msg 404 184 0;
#X obj 343 225 metro 10;
#X text 407 226 Resolution:10ms;
#X text 557 20 - record start the metro \; - end stops the metro and reset to 0 the output \; - loop stops reset to 0 the output \; - each midi input resets the output to 0 \;;
#X obj 450 277 f;
#X obj 480 277 + 10;
#X floatatom 450 325 13 0 0 1 ms - - 0;
#X msg 468 141 0;
#X obj 343 100 inlet;
#X obj 404 99 inlet;
#X obj 468 99 inlet;
#X obj 450 357 outlet;
#X text 340 66 start record, f 6;
#X text 402 66 end record, f 6;
#X text 467 65 loop record, f 6;
#X text 456 307 absolute time from the first bar;
#X obj 506 356 s \$0-i-abs-time;
#X floatatom 117 121 12 0 0 2 Absolute-Time \$0-i-abs-time \$0-abs-time-dummy 0;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 1 0 5 1;
#X connect 2 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 5 1;
#X connect 7 0 12 0;
#X connect 7 0 17 0;
#X connect 8 0 5 1;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 11 0 8 0;
#X coords 0 -1 1 1 125 50 2 100 100;
#X restore 673 501 pd seq-timer;
#X obj 587 501 bng 20 250 50 0 empty empty midi -2 27 0 10 #fcfcfc #000000 #000000;
#X obj 673 448 bng 20 250 50 0 empty empty start -3 27 0 10 #fcfcfc #000000 #000000;
#X obj 732 366 bng 20 250 50 0 empty empty end 23 10 0 10 #fcfcfc #000000 #000000;
#X obj 791 332 bng 20 250 50 0 empty empty loop 23 10 0 10 #fcfcfc #000000 #000000;
#X obj 587 551 f;
#X msg 626 387 1;
#X msg 633 413 0;
#X msg 1141 395 sort, f 5;
#X obj 1022 464 text sequence \$0-sequence;
#X obj 1206 246 text delete \$0-sequence;
#X msg 1022 411 line 0 \, step;
#X msg 980 437 step;
#X obj 1022 651 del;
#X obj 1022 514 t b f;
#X floatatom 1054 541 5 0 0 0 - - - 0;
#X obj 1054 594 -;
#X msg 1088 593 0;
#X obj 1054 565 t f f;
#X floatatom 1054 619 5 0 0 1 \ next-bang-in\ (ms) - - 0;
#X text 1121 493 This structure is for outputting the sequence considering the first item in each row is absolute time from start of the first bar., f 34;
#X text 1120 568 in this case is a simple bang output;
#X text 841 288 when recording: if loop happens \, previous midi input should be replayed --> Launch them., f 25;
#X obj 519 671 outlet;
#X obj 1022 375 t b b, f 10;
#X text 1293 60 Sorting with every midi in will result in step of \$0-sequence to lose the count. for example if an index is added before it \, next step will output again the previous step since index is moved one up. --> Sort at the beginning of the launch. But will it be fast enough? - lets hope so;
#X obj 810 364 s \$0-bang-loop;
#X obj 1068 308 r \$0-bang-loop;
#X obj 740 394 s \$0-bang-end;
#X obj 1141 345 r \$0-bang-end;
#X obj 597 600 s \$0-i-recorded;
#X listbox 47 61 9 0 0 1 snap \$0-i-recorded \$0-recorded-dummy 0;
#X obj 673 554 s \$0-i-absolute-time;
#X floatatom 47 39 11 0 0 1 absolute-time \$0-i-absolute-time \$0-absolute-time-dummy 0;
#X obj 1206 195 r \$0-clear-seq;
#X obj 9 39 bng 35 250 50 0 \$0-midi-one-shot \$0-i-midi-one-shot-dummy empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 7 19 rt-Drum-Sequencer;
#X text 1 -1 Midi;
#X text 49 -1 Record;
#X text 111 -1 End/Loop;
#X text 183 0 Launch;
#X connect 1 0 35 0;
#X connect 4 0 23 0;
#X connect 4 0 27 0;
#X connect 5 0 45 0;
#X connect 6 0 20 0;
#X connect 7 0 19 0;
#X connect 13 0 14 1;
#X connect 14 0 22 0;
#X connect 15 0 18 0;
#X connect 15 0 51 0;
#X connect 16 0 31 0;
#X connect 19 0 14 0;
#X connect 19 0 44 0;
#X connect 20 0 24 0;
#X connect 20 0 28 0;
#X connect 20 1 25 0;
#X connect 21 0 26 1;
#X connect 21 0 53 0;
#X connect 22 0 26 0;
#X connect 23 0 21 0;
#X connect 24 0 21 1;
#X connect 24 0 49 0;
#X connect 25 0 21 2;
#X connect 25 0 47 0;
#X connect 26 0 15 0;
#X connect 27 0 13 0;
#X connect 28 0 13 0;
#X connect 29 0 12 0;
#X connect 30 0 1 0;
#X connect 32 0 30 0;
#X connect 33 0 30 0;
#X connect 34 0 44 0;
#X connect 34 0 33 0;
#X connect 35 0 34 0;
#X connect 35 1 36 0;
#X connect 36 0 39 0;
#X connect 37 0 40 0;
#X connect 38 0 37 1;
#X connect 39 0 37 1;
#X connect 39 1 37 0;
#X connect 40 0 34 1;
#X connect 45 0 32 0;
#X connect 45 1 38 0;
#X connect 45 1 29 0;
#X connect 48 0 45 0;
#X connect 50 0 29 0;
#X connect 55 0 16 0;
#X coords 0 -1 1 1 230 120 2 0 0;
