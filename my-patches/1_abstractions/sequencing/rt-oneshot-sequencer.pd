#N canvas 52 20 1854 977 12;
#X text 326 20 VERSION 0;
#X obj 933 398 unpack f f;
#X obj 818 13 text define -k notes;
#A set ** timer/realtime do not work here since there is no toggle to stop them. Easy to do this with a counter with desired precision (10ms) with metro 10 \; \; \; ** in general since I am not good at finger drumming \, velocity should be considered constant or discarded and hard-coded with possibility of modification using a CC \; \; \; For oneshot sequencer \; - duration of holding the note does not matter \; - velocity should be constant with a CC \; For note sequencer \; - duration is important for ADSR \; - aftertouch could be useful \; \; \; Need to keep textfile closed \, otherwise might experience lag/buginess \;;
#X text 454 15 Realtime sequencer: for One-shot input;
#X obj 524 98 inlet;
#X obj 579 98 inlet;
#X obj 618 170 inlet, f 7;
#X obj 450 155 inlet;
#X text 521 75 Record;
#X text 576 75 Launch;
#X text 625 142 End/Loop;
#X text 449 135 Midi;
#X obj 1053 207 text define -k \$0-sequence;
#A set;
#X obj 495 261 tgl 20 0 empty empty GO 23 10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 456 292 spigot;
#X listbox 508 599 20 0 0 0 - - - 0;
#X msg 248 594 -1;
#X obj 4 23 bng 20 250 50 0 empty empty Clear-Sequence 23 10 0 12 #fcfcfc #000000 #000000;
#X obj 508 626 text insert \$0-sequence 1e+09;
#X obj 450 233 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 618 197 sel 0 1, f 12;
#N canvas 778 252 848 411 seq-timer 0;
#X obj 343 264 f;
#X floatatom 105 126 10 0 0 1 ms - - 0;
#X msg 343 135 1;
#X msg 391 171 0;
#X msg 285 183 0;
#X obj 343 212 metro 10;
#X obj 373 264 + 10;
#X text 407 213 Resolution:10ms;
#X text 278 5 - record start the metro \; - end stops the metro and reset to 0 the output \; - loop stops reset to 0 the output \; - each midi input resets the output to 0 \;;
#X obj 450 264 f;
#X obj 480 264 + 10;
#X text 340 284 relative;
#X floatatom 105 150 13 0 0 1 ms - - 0;
#X text 449 284 absolute (for sorting purpose);
#X msg 468 179 0;
#X text 341 114 start-record;
#X text 389 149 end-record;
#X text 466 159 loop-record;
#X text 284 163 midi-in;
#X obj 285 87 inlet;
#X obj 343 87 inlet;
#X obj 391 86 inlet;
#X obj 468 87 inlet;
#X obj 343 348 outlet;
#X obj 450 347 outlet;
#X text 100 171 rel;
#X text 199 171 abs;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 1 0 23 0;
#X connect 2 0 5 0;
#X connect 3 0 0 1;
#X connect 3 0 5 0;
#X connect 3 0 9 1;
#X connect 4 0 0 1;
#X connect 5 0 0 0;
#X connect 5 0 9 0;
#X connect 6 0 0 1;
#X connect 9 0 10 0;
#X connect 9 0 12 0;
#X connect 10 0 9 1;
#X connect 12 0 24 0;
#X connect 14 0 0 1;
#X connect 14 0 9 1;
#X connect 19 0 4 0;
#X connect 20 0 2 0;
#X connect 21 0 3 0;
#X connect 22 0 14 0;
#X coords 0 -1 1 1 125 90 1 100 100;
#X restore 540 385 pd seq-timer;
#X obj 509 323 bng 20 250 50 0 empty empty midi -2 27 0 10 #fcfcfc #000000 #000000;
#X obj 579 347 bng 20 250 50 0 empty empty start -3 27 0 10 #fcfcfc #000000 #000000;
#X obj 618 347 bng 20 250 50 0 empty empty end 2 27 0 10 #fcfcfc #000000 #000000;
#X obj 658 347 bng 20 250 50 0 empty empty loop -2 27 0 10 #fcfcfc #000000 #000000;
#X obj 508 564 f;
#X msg 495 233 1;
#X msg 530 233 0;
#X msg 1053 180 sort, f 5;
#X obj 933 373 text sequence \$0-sequence;
#X obj 248 619 text delete \$0-sequence;
#X msg 933 320 line 0 \, step;
#X msg 945 345 step;
#X obj 933 560 del;
#X obj 933 423 t b f;
#X floatatom 965 450 5 0 0 0 - - - 0;
#X obj 965 503 -;
#X msg 997 503 0;
#X obj 965 474 t f f;
#X floatatom 965 531 5 0 0 1 \ next-bang-in\ (ms) - - 0;
#X text 1032 402 This structure is for outputting the sequence considering the first item in each row is absolute time from start of the first bar., f 34;
#X text 1031 477 in this case is a simple bang output;
#X text 658 273 when recording: if loop happens \, previous midi input should be replayed --> Launch them., f 25;
#X text 516 478 relative timing is not directly used and calculated after when launching. only way to correctly play in loop mode recording, f 41;
#X obj 508 357 t b b;
#X obj 450 861 outlet;
#X obj 933 284 t b b;
#X text 1050 93 Sorting with every midi in will result in step of \$0-sequence to lose the count. for example if an index is added before it \, next step will output again the previous step since index is moved one up. --> Sort at the beginning of the launch. But will it be fast enough? - lets hope so;
#X connect 1 0 35 0;
#X connect 4 0 23 0;
#X connect 4 0 27 0;
#X connect 5 0 23 0;
#X connect 5 0 47 0;
#X connect 6 0 20 0;
#X connect 7 0 19 0;
#X connect 13 0 14 1;
#X connect 14 0 22 0;
#X connect 15 0 18 0;
#X connect 16 0 31 0;
#X connect 17 0 16 0;
#X connect 19 0 14 0;
#X connect 19 0 46 0;
#X connect 20 0 24 0;
#X connect 20 0 28 0;
#X connect 20 1 25 0;
#X connect 21 1 26 1;
#X connect 22 0 45 0;
#X connect 23 0 21 1;
#X connect 24 0 21 2;
#X connect 24 0 29 0;
#X connect 25 0 21 3;
#X connect 25 0 47 0;
#X connect 26 0 15 0;
#X connect 27 0 13 0;
#X connect 28 0 13 0;
#X connect 29 0 12 0;
#X connect 30 0 1 0;
#X connect 32 0 30 0;
#X connect 33 0 30 0;
#X connect 34 0 46 0;
#X connect 34 0 33 0;
#X connect 35 0 34 0;
#X connect 35 1 36 0;
#X connect 36 0 39 0;
#X connect 37 0 40 0;
#X connect 38 0 37 1;
#X connect 39 0 37 1;
#X connect 39 1 37 0;
#X connect 40 0 34 1;
#X connect 45 0 26 0;
#X connect 45 1 21 0;
#X connect 47 0 32 0;
#X connect 47 1 38 0;
#X connect 47 1 29 0;
#X coords 0 -1 1 1 130 50 1 0 0;
