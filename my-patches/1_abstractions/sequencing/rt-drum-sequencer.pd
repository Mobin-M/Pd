#N canvas 979 20 927 977 12;
#X obj 138 21 text define -k notes;
#A set ** timer/realtime do not work here since there is no toggle to stop them. Easy to do this with a counter with desired precision (10ms) with metro 10 \; \; \; ** in general since I am not good at finger drumming \, velocity should be considered constant or discarded and hard-coded with possibility of modification using a CC \; \; \; For oneshot sequencer \; - duration of holding the note does not matter \; - velocity should be constant with a CC \; For note sequencer \; - duration is important for ADSR \; - aftertouch could be useful \; \; \; Need to keep textfile closed \, otherwise might experience lag/buginess \;;
#X obj 177 181 inlet;
#X obj 236 181 inlet, f 6;
#X obj 14 179 inlet;
#X text 174 161 Launch;
#X text 234 161 End/Loop;
#X text 13 159 Midi;
#X obj 81 292 tgl 20 0 empty empty queue 23 10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 30 292 spigot;
#X listbox 30 482 20 0 0 0 - - - 0;
#X msg 134 76 -1;
#X obj 60 24 bng 20 250 50 0 \$0-clear-seq \$0-i-clear-seq-dummy Clear 23 10 0 12 #fcfcfc #000000 #000000;
#X obj 30 529 text insert \$0-sequence 1e+09;
#X obj 14 238 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 236 272 sel 0 1, f 8;
#N canvas 778 252 848 411 seq-timer 0;
#X msg 343 148 1;
#X msg 404 184 0;
#X obj 343 225 metro 10;
#X text 407 226 Resolution:10ms;
#X text 557 20 - record start the metro \; - end stops the metro and reset to 0 the output \; - loop stops reset to 0 the output \; - each midi input resets the output to 0 \;;
#X obj 450 277 f;
#X obj 480 277 + 10;
#X floatatom 450 325 13 0 0 1 ms - - 0;
#X msg 468 141 0;
#X obj 343 100 inlet;
#X obj 404 99 inlet;
#X obj 468 99 inlet;
#X obj 450 357 outlet;
#X text 340 66 start record, f 6;
#X text 402 66 end record, f 6;
#X text 467 65 loop record, f 6;
#X text 456 307 absolute time from the first bar;
#X obj 506 356 s \$0-i-abs-time;
#X floatatom 117 121 12 0 0 2 Absolute-Time \$0-i-abs-time \$0-abs-time-dummy 0;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X connect 1 0 5 1;
#X connect 2 0 5 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 6 0 5 1;
#X connect 7 0 12 0;
#X connect 7 0 17 0;
#X connect 8 0 5 1;
#X connect 9 0 0 0;
#X connect 10 0 1 0;
#X connect 11 0 8 0;
#X coords 0 -1 1 1 125 50 2 100 100;
#X restore 177 407 pd seq-timer;
#X obj 177 354 bng 20 250 50 0 empty empty start 23 10 0 10 #fcfcfc #000000 #000000;
#X obj 236 355 bng 20 250 50 0 empty empty end 23 10 0 10 #fcfcfc #000000 #000000;
#X obj 295 355 bng 20 250 50 0 empty empty loop 23 10 0 10 #fcfcfc #000000 #000000;
#X obj 30 457 f;
#X obj 134 101 text delete \$0-sequence;
#X text 429 214 when recording: if loop happens \, previous midi input should be replayed --> Launch them., f 21;
#X obj 14 587 outlet;
#X text 11 629 Sorting with every midi in will result in step of \$0-sequence to lose the count. for example if an index is added before it \, next step will output again the previous step since index is moved one up. --> Sort at the beginning of the launch. But will it be fast enough? - lets hope so;
#X obj 308 407 s \$0-bang-loop;
#X obj 242 379 s \$0-bang-end;
#X obj 40 506 s \$0-i-recorded;
#X listbox 4 96 8 0 0 1 snap[ms] \$0-i-recorded \$0-recorded-dummy 0;
#X obj 177 460 s \$0-i-absolute-time;
#X floatatom 4 73 8 0 0 1 time[ms] \$0-i-absolute-time \$0-absolute-time-dummy 0;
#X obj 134 50 r \$0-clear-seq;
#X obj 4 24 bng 20 250 50 0 \$0-trig \$0-i-trig-dummy trig 23 10 0 12 #fcfcfc #000000 #000000;
#X text 2 1 DRUM SEQUENCER;
#X obj 433 405 unpack f f;
#X obj 610 348 text define -k \$0-sequence;
#A set 80 \; 760 \; 1490 \; 2190 \; 3870 \; 4560 \; 5280 \;;
#X msg 552 347 sort, f 5;
#X obj 433 380 text sequence \$0-sequence;
#X msg 433 352 line 0 \, step;
#X msg 392 556 step;
#X obj 433 567 del;
#X obj 433 430 t b f;
#X floatatom 465 457 5 0 0 0 - - - 0;
#X obj 465 510 -;
#X msg 499 509 0;
#X obj 465 481 t f f;
#X floatatom 465 535 5 0 0 1 \ next-bang-in\ (ms) - - 0;
#X text 536 404 This structure is for outputting the sequence considering the first item in each row is absolute time from start of the first bar., f 34;
#X obj 433 327 t b b, f 10;
#X obj 433 299 r \$0-bang-loop;
#X obj 552 311 r \$0-bang-end;
#X obj 636 382 print;
#N canvas 861 535 450 197 save-text 0;
#X obj 27 36 savestate;
#X obj 87 76 text tolist \$0-sequence;
#X obj 124 37 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 27 118 text fromlist \$0-sequence;
#X connect 0 0 3 0;
#X connect 0 1 1 0;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X restore 708 322 pd save-text;
#X obj 22 204 r \$0-trig;
#X text 138 2 VERSION 1;
#X obj 4 49 tgl 20 0 \$0-UI-rec \$0-i-UI-rec record-off 23 10 0 12 #e0e1e1 #000000 #000000 0 1;
#N canvas 519 139 450 251 rec-coloring 0;
#X msg 16 112 color #e0e1e1;
#X obj 16 33 sel 0 1;
#X obj 16 58 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 39 58 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X obj 16 8 r \$0-rec-label;
#X msg 33 135 label record-off;
#X msg 166 134 label recording;
#X msg 149 111 color #ff0000;
#X obj 16 205 s \$0-i-UI-rec;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 0 0;
#X connect 2 0 5 0;
#X connect 3 0 7 0;
#X connect 3 0 6 0;
#X connect 4 0 1 0;
#X connect 5 0 8 0;
#X connect 6 0 8 0;
#X connect 7 0 8 0;
#X restore 4 128 pd rec-coloring;
#X msg 298 185 1;
#X msg 305 210 0;
#X obj 177 208 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 220 1 Realtime sequencer: for One-shot/drums input;
#X obj 308 22 loadbang;
#X msg 308 45 0;
#X msg 58 321 set \$1;
#X obj 58 346 s \$0-i-UI-rec;
#X obj 81 265 r \$0-UI-rec;
#X obj 58 372 s \$0-rec-label;
#X msg 151 292 0;
#X obj 308 69 s \$0-i-UI-rec;
#X connect 1 0 58 0;
#X connect 2 0 14 0;
#X connect 3 0 13 0;
#X connect 7 0 8 1;
#X connect 7 0 62 0;
#X connect 7 0 65 0;
#X connect 8 0 19 0;
#X connect 9 0 12 0;
#X connect 9 0 26 0;
#X connect 10 0 20 0;
#X connect 13 0 22 0;
#X connect 13 0 8 0;
#X connect 14 0 17 0;
#X connect 14 0 66 0;
#X connect 14 1 18 0;
#X connect 15 0 19 1;
#X connect 15 0 28 0;
#X connect 16 0 15 0;
#X connect 17 0 15 1;
#X connect 17 0 25 0;
#X connect 18 0 15 2;
#X connect 18 0 24 0;
#X connect 19 0 9 0;
#X connect 30 0 10 0;
#X connect 33 0 40 0;
#X connect 34 0 50 0;
#X connect 35 0 34 0;
#X connect 36 0 33 0;
#X connect 37 0 36 0;
#X connect 38 0 36 0;
#X connect 39 0 38 0;
#X connect 39 0 22 0;
#X connect 40 0 39 0;
#X connect 40 1 41 0;
#X connect 41 0 44 0;
#X connect 42 0 45 0;
#X connect 43 0 42 1;
#X connect 44 0 42 1;
#X connect 44 1 42 0;
#X connect 45 0 39 1;
#X connect 47 0 37 0;
#X connect 47 1 43 0;
#X connect 47 1 35 0;
#X connect 48 0 47 0;
#X connect 49 0 35 0;
#X connect 52 0 13 0;
#X connect 56 0 14 0;
#X connect 57 0 14 0;
#X connect 58 0 16 0;
#X connect 58 0 47 0;
#X connect 60 0 61 0;
#X connect 61 0 67 0;
#X connect 62 0 63 0;
#X connect 64 0 7 0;
#X connect 66 0 7 0;
#X coords 0 -1 1 1 125 120 2 0 0;
