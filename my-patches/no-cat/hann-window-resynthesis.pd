#N canvas 3003 99 505 287 12;
#X declare -stdpath ./;
#N canvas 2087 93 584 795 fft-analysis 1;
#X obj 33 226 rfft~, f 6;
#X obj 34 190 tabreceive~ \$0-hann;
#X obj 30 33 block~ 512 4;
#X text 92 101 The inlet~ now re-uses 3/4 of the previous block \, along with the 128 new samples., f 49;
#X text 197 159 window function as before.;
#X obj 30 410 *~;
#X obj 60 410 tabreceive~ \$0-hann;
#X obj 31 374 rifft~;
#X obj 31 586 outlet~;
#X text 129 19 block~ object specifies vector size of 512 and overlap four. This window now computes blocks of 512 samples at intervals of 128 samples computed on the parent patch., f 55;
#X obj 63 542 tabwrite~ \$0-resynth;
#X obj 71 507 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#N canvas 0 50 450 250 (subpatch) 0;
#X array \$0-resynth 512 float 3;
#A 0 0 1.41617e-09 2.26752e-08 1.14775e-07 3.62725e-07 8.85369e-07 1.83542e-06 3.39917e-06 5.79669e-06 9.28119e-06 1.41392e-05 2.06903e-05 2.92869e-05 4.03134e-05 5.41868e-05 7.13555e-05 9.23009e-05 0.000117534 0.000147596 0.000183061 0.00022453 0.000272637 0.000328042 0.000391434 0.000463532 0.000545079 0.000636848 0.000739638 0.00085427 0.000981594 0.00112249 0.00127784 0.00144857 0.00163563 0.00183998 0.0020626 0.0023045 0.0025667 0.00285025 0.00315619 0.00348563 0.00383963 0.00421932 0.00462582 0.00506026 0.00552379 0.00601757 0.00654277 0.00710058 0.00769218 0.00831877 0.00898156 0.00968176 0.0104206 0.0111992 0.012019 0.012881 0.0137865 0.0147368 0.015733 0.0167765 0.0178683 0.0190098 0.0202021 0.0214465 0.0227441 0.0240961 0.0255038 0.0269682 0.0284906 0.0300721 0.0317138 0.0334169 0.0351824 0.0370114 0.0389051 0.0408645 0.0428906 0.0449844 0.0471469 0.0493791 0.051682 0.0540565 0.0565034 0.0590237 0.0616182 0.0642877 0.0670331 0.069855 0.0727543 0.0757316 0.0787876 0.0819229 0.0851383 0.0884341 0.0918111 0.0952696 0.0988102 0.102433 0.106139 0.109928 0.113801 0.117758 0.121799 0.125924 0.130133 0.134427 0.138806 0.143269 0.147818 0.15245 0.157168 0.16197 0.166856 0.171826 0.17688 0.182017 0.187237 0.192541 0.197926 0.203393 0.208942 0.214571 0.22028 0.226068 0.231935 0.23788 0.243902 0.25 0.256173 0.262421 0.268742 0.275136 0.2816 0.288135 0.294739 0.301411 0.308148 0.314952 0.321819 0.328748 0.335738 0.342788 0.349896 0.35706 0.36428 0.371552 0.378876 0.38625 0.393672 0.401141 0.408654 0.416209 0.423805 0.43144 0.439112 0.446819 0.454559 0.462329 0.470128 0.477954 0.485804 0.493676 0.501569 0.509479 0.517405 0.525344 0.533294 0.541253 0.549218 0.557187 0.565158 0.573128 0.581094 0.589055 0.597008 0.604951 0.61288 0.620794 0.62869 0.636565 0.644418 0.652244 0.660043 0.667811 0.675547 0.683246 0.690908 0.698529 0.706106 0.713638 0.721122 0.728555 0.735934 0.743258 0.750524 0.757729 0.764871 0.771947 0.778955 0.785893 0.792758 0.799547 0.806259 0.812891 0.81944 0.825905 0.832283 0.838572 0.844769 0.850873 0.85688 0.86279 0.8686 0.874308 0.879911 0.885408 0.890797 0.896076 0.901242 0.906295 0.911232 0.916051 0.920751 0.925329 0.929785 0.934116 0.938322 0.9424 0.946348 0.950166 0.953852 0.957405 0.960823 0.964105 0.96725 0.970257 0.973124 0.975851 0.978436 0.980878 0.983177 0.985333 0.987342 0.989206 0.990924 0.992494 0.993917 0.995191 0.996316 0.997293 0.998119 0.998796 0.999323 0.999699 0.999925 1 0.999925 0.999699 0.999322 0.998796 0.998119 0.997292 0.996316 0.99519 0.993916 0.992493 0.990923 0.989205 0.987341 0.985331 0.983176 0.980877 0.978434 0.975849 0.973122 0.970255 0.967248 0.964103 0.960821 0.957402 0.95385 0.950163 0.946345 0.942397 0.938319 0.934113 0.929782 0.925326 0.920747 0.916048 0.911228 0.906292 0.901239 0.896072 0.890793 0.885404 0.879907 0.874304 0.868596 0.862786 0.856876 0.850868 0.844765 0.838567 0.832278 0.8259 0.819436 0.812886 0.806254 0.799542 0.792753 0.785888 0.77895 0.771942 0.764866 0.757724 0.750519 0.743253 0.735929 0.728549 0.721116 0.713633 0.706101 0.698523 0.690902 0.683241 0.675541 0.667806 0.660038 0.652239 0.644412 0.63656 0.628684 0.620788 0.612875 0.604945 0.597003 0.58905 0.581089 0.573122 0.565152 0.557182 0.549213 0.541247 0.533289 0.525339 0.517399 0.509474 0.501563 0.493671 0.485799 0.477949 0.470123 0.462324 0.454553 0.446814 0.439107 0.431435 0.4238 0.416204 0.408648 0.401136 0.393667 0.386245 0.378871 0.371547 0.364275 0.357056 0.349891 0.342783 0.335733 0.328743 0.321814 0.314947 0.308144 0.301406 0.294734 0.288131 0.281596 0.275131 0.268738 0.262417 0.256169 0.249996 0.243898 0.237876 0.231931 0.226064 0.220276 0.214567 0.208938 0.203389 0.197922 0.192537 0.187234 0.182013 0.176876 0.171822 0.166852 0.161966 0.157165 0.152447 0.147814 0.143266 0.138803 0.134424 0.13013 0.125921 0.121796 0.117755 0.113799 0.109926 0.106137 0.102431 0.0988077 0.0952672 0.0918087 0.0884318 0.085136 0.0819207 0.0787854 0.0757295 0.0727522 0.069853 0.0670311 0.0642858 0.0616164 0.0590219 0.0565017 0.0540548 0.0516804 0.0493776 0.0471454 0.0449829 0.0428891 0.0408631 0.0389037 0.0370101 0.0351811 0.0334156 0.0317125 0.0300709 0.0284894 0.0269671 0.0255027 0.0240951 0.0227431 0.0214455 0.0202012 0.0190089 0.0178674 0.0167756 0.0157322 0.014736 0.0137858 0.0128803 0.0120183 0.0111986 0.01042 0.00968116 0.00898099 0.00831823 0.00769166 0.00710009 0.00654231 0.00601713 0.00552337 0.00505986 0.00462545 0.00421898 0.00383931 0.00348532 0.00315591 0.00284998 0.00256645 0.00230427 0.00206239 0.00183979 0.00163545 0.00144841 0.00127768 0.00112235 0.000981469 0.000854155 0.000739534 0.000636755 0.000544995 0.000463457 0.000391368 0.000327984 0.000272586 0.000224486 0.000183022 0.000147563 0.000117506 9.2278e-05 7.13364e-05 5.4171e-05 4.03006e-05 2.92769e-05 2.06827e-05 1.41334e-05 9.27701e-06 5.79368e-06 3.39719e-06 1.83412e-06 8.8464e-07 3.6233e-07 1.14634e-07 2.26303e-08 1.41168e-09;
#X coords 0 1 512 -1 200 140 1;
#X restore 221 423 graph;
#X obj 32 264 /~;
#X obj 71 264 /~;
#X floatatom 107 265 5 0 0 0 - - - 0;
#X text 28 610 This repackages the output into 64-sample chunks for the parent window. Since we're operating with an overlap \, the outlet~ object performs an overlapped sum of the blocks computed in this window.;
#X text 28 685 The reuslt of over-lap sum for "block~ 512 4" is constant value of 3/2 (1.5) in the out of this subpatch if no normalizing factor is considered!;
#X text 147 252 Division by N is necessary since rfft~ does not normalize the output \, and rifft~ needs normalized input;
#X obj 107 219 loadbang;
#X msg 107 242 512;
#X obj 31 340 /~;
#X obj 70 340 /~;
#X floatatom 106 341 5 0 0 0 - - - 0;
#X obj 106 295 loadbang;
#X msg 106 318 1.5;
#X text 27 740 3/2 is the gain of overlap-4 reconstruction when Hann window function is applied twice.;
#X text 148 325 See below the reason for this normalization \; If set to 1 (no normalization) -> output will be constant value of 3/2 (1.5);
#X connect 0 0 13 0;
#X connect 0 1 14 0;
#X connect 1 0 0 0;
#X connect 5 0 8 0;
#X connect 5 0 10 0;
#X connect 6 0 5 1;
#X connect 7 0 5 0;
#X connect 11 0 10 0;
#X connect 13 0 21 0;
#X connect 14 0 22 0;
#X connect 15 0 14 1;
#X connect 15 0 13 1;
#X connect 19 0 20 0;
#X connect 20 0 15 0;
#X connect 21 0 7 0;
#X connect 22 0 7 1;
#X connect 23 0 22 1;
#X connect 23 0 21 1;
#X connect 24 0 25 0;
#X connect 25 0 23 0;
#X restore 25 51 pd fft-analysis;
#X obj 232 9 declare -stdpath ./;
#N canvas 0 50 450 250 (subpatch) 0;
#X array \$0-resynth-overlap-sum 64 float 3;
#A 0 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999998 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997 0.999997;
#X coords 0 1 64 -1 200 140 1 0 0;
#X restore 265 121 graph;
#X obj 43 171 bng 20 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X text 18 11 PURE HANN WINDOW RESYNTHESIS;
#X floatatom 81 129 5 0 0 0 - - - 0;
#X obj 81 77 loadbang;
#X msg 81 102 1;
#X obj 24 129 /~;
#X obj 24 241 tabwrite~ \$0-resynth-overlap-sum;
#N canvas 687 159 571 372 Hann-window 0;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-hann 512 float 0;
#X coords 0 1 511 0 200 120 1;
#X restore 293 151 graph;
#X msg 181 165 0;
#X obj 75 214 osc~;
#X obj 75 166 samplerate~;
#X obj 75 237 *~ -0.5;
#X obj 75 260 +~ 0.5;
#X obj 57 285 tabwrite~ \$0-hann;
#X text 279 143 1;
#X text 272 261 0;
#X text 288 274 0;
#X obj 75 190 / 512;
#X obj 57 123 bng 19 250 50 0 empty empty empty 0 -6 0 8 #dfdfdf #000000 #000000;
#X text 399 126 Hann window;
#X text 123 212 period 512;
#X text 100 117 recalculate Hann;
#X text 135 132 window table;
#X obj 57 82 loadbang;
#X text 91 26 The Hann window is now recomputed on 'loadbang' to make the file smaller (it doesn't have to be saved with the array.);
#X text 474 277 511;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 10 0 2 0;
#X connect 11 0 3 0;
#X connect 11 0 1 0;
#X connect 11 0 6 0;
#X connect 16 0 11 0;
#X restore 376 10 pd Hann-window;
#X connect 0 0 8 0;
#X connect 3 0 9 0;
#X connect 5 0 8 1;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
